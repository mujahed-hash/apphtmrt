"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[7439],{7439:(A,m,r)=>{r.r(m),r.d(m,{ItembycatModule:()=>Z});var a=r(6814),d=r(3403),t=r(5879),u=r(2039),f=r(2734),g=r(6223),l=r(617),p=r(9560);const b=["loadingIndicator"];function x(n,s){if(1&n&&(t.TgZ(0,"div",8),t._uU(1),t.qZA()),2&n){const i=s.$implicit;t.Q6J("ngClass",i.type),t.xp6(1),t.hij(" ",i.message," ")}}function _(n,s){1&n&&(t.TgZ(0,"div",9)(1,"p",10),t._uU(2,"There are no Items in this category"),t.qZA()())}function y(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"div",23)(1,"button",24),t.NdJ("click",function(){t.CHM(i);const o=t.oxw(2).$implicit,c=t.oxw();return t.KtG(c.addProductToCart(o._id))}),t.TgZ(2,"mat-icon",25),t._uU(3,"add_shopping_cart"),t.qZA(),t._uU(4," Add to cart "),t.qZA()()}}function C(n,s){1&n&&(t.TgZ(0,"div",23)(1,"button",26)(2,"mat-icon",25),t._uU(3,"add_shopping_cart"),t.qZA(),t._uU(4," Go to cart "),t.qZA()())}const h=function(n){return["/buyer/item/view",n]};function v(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"div",13)(1,"div",14),t._UZ(2,"img",15),t.qZA(),t.TgZ(3,"div",16)(4,"p",17),t._uU(5),t.qZA(),t.TgZ(6,"button",18)(7,"mat-icon",19),t._uU(8,"visibility"),t.qZA(),t._uU(9," View"),t.qZA(),t.TgZ(10,"p"),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"div",20)(14,"p-inputNumber",21),t.NdJ("ngModelChange",function(o){t.CHM(i);const c=t.oxw().$implicit,T=t.oxw();return t.KtG(T.quantities[c._id]=o)}),t.qZA()(),t.YNc(15,y,5,0,"div",22),t.YNc(16,C,5,0,"div",22),t.qZA()()}if(2&n){const i=t.oxw().$implicit,e=t.oxw();t.xp6(2),t.s9C("alt",i.prodName),t.Q6J("routerLink",t.VKq(16,h,i.customIdentifer))("src",i.images[0],t.LSH),t.xp6(3),t.Oqu(i.prodName),t.xp6(1),t.Q6J("routerLink",t.VKq(18,h,i.customIdentifer)),t.xp6(5),t.AsE("",t.xi3(12,13,i.prodPrice,"INR"),"/",i.prodSize,""),t.xp6(3),t.Q6J("ngModel",e.quantities[i._id])("showButtons",!0)("min",1)("max",i.countInStock),t.xp6(1),t.Q6J("ngIf",!i.inCart),t.xp6(1),t.Q6J("ngIf",i.inCart)}}function w(n,s){if(1&n&&(t.TgZ(0,"div",11),t.YNc(1,v,17,20,"div",12),t.qZA()),2&n){const i=s.$implicit;t.xp6(1),t.Q6J("ngIf",i.countInStock>=1)}}function M(n,s){if(1&n){const i=t.EpF();t.TgZ(0,"button",27,28),t.NdJ("click",function(){t.CHM(i);const o=t.oxw();return t.KtG(o.loadProducts())}),t._uU(2," Load More "),t.qZA()}if(2&n){const i=t.oxw();t.Q6J("disabled",i.isLoading)}}const P=[{path:"item/:customIdentifer",component:(()=>{class n{constructor(i,e,o,c){this.BuyerService=i,this.actRoute=e,this.el=o,this.notificationService=c,this.products=[],this.start=0,this.limit=10,this.isLoading=!1,this.hasMoreProducts=!0,this.quantities={},this.notifications=[]}ngOnInit(){this.actRoute.params.subscribe(i=>{this.catId=i.customIdentifer}),this.loadProducts(),this.token=localStorage.getItem("token"),console.log(this.quantity),this.notificationService.notifications$.subscribe(i=>{this.notifications=i}),this.products.forEach(i=>{this.quantities[i.id]=this.quantities[i.id]||1})}ngAfterViewInit(){this.initIntersectionObserver(),this.checkContentHeight()}loadProducts(){this.isLoading||!this.hasMoreProducts||(this.isLoading=!0,this.token=localStorage.getItem("token"),console.log("toke",this.token),this.BuyerService.getProductsByCategory(this.token,this.catId,this.start,this.limit).subscribe(i=>{console.log(i),this.isLoading=!1,i&&Array.isArray(i.products)?(this.products=[...this.products,...i.products],this.products.forEach(e=>{this.quantities[e._id]||(this.quantities[e._id]=1)}),this.start+=this.limit,this.checkContentHeight(),this.hasMoreProducts=i.products.length===this.limit):(console.error("Unexpected response structure:",i),this.checkContentHeight())},i=>{this.isLoading=!1,console.error("Error loading products:",i)}))}checkContentHeight(){const i=this.el.nativeElement.querySelector(".items-").offsetHeight,e=window.innerHeight;this.hasMoreProducts=i>e}onResize(){this.checkContentHeight()}initIntersectionObserver(){const i=new IntersectionObserver(e=>{e[0].isIntersecting&&this.hasMoreProducts&&!this.isLoading&&this.loadProducts()},{rootMargin:"100px"});this.loadingIndicator&&i.observe(this.loadingIndicator.nativeElement)}addProductToCart(i){const e=this.quantities[i]||1;console.log(),this.BuyerService.addToCart(i,e,this.token).subscribe(o=>{this.loadProducts(),this.notificationService.addNotification("Item added to cart!","success"),console.log(o)},o=>{console.error("Error adding product to cart:",o)})}static#t=this.\u0275fac=function(e){return new(e||n)(t.Y36(u.y),t.Y36(d.gz),t.Y36(t.SBq),t.Y36(f.g))};static#i=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-itembycategory"]],viewQuery:function(e,o){if(1&e&&t.Gf(b,5),2&e){let c;t.iGM(c=t.CRH())&&(o.loadingIndicator=c.first)}},hostBindings:function(e,o){1&e&&t.NdJ("resize",function(){return o.onResize()},!1,t.Jf7)},decls:8,vars:4,consts:[[2,"width","80%","position","fixed","z-index","5"],["style","position: relative; ","class","notification",3,"ngClass",4,"ngFor","ngForOf"],["class","checkout-all","style","",4,"ngIf"],[1,"hh"],[1,"items-"],["class","item",4,"ngFor","ngForOf"],[1,"itm-btn"],["style","",3,"disabled","click",4,"ngIf"],[1,"notification",2,"position","relative",3,"ngClass"],[1,"checkout-all"],[2,"background-color","white","padding","4px 8px","border","#c8c9d4 1.5px solid","color","#0D1282","width","max-content","border-radius","9px"],[1,"item"],["class","sub-item","style","overflow-x: hidden;","routerLinkActive","router-link-active","style","",4,"ngIf"],["routerLinkActive","router-link-active",1,"sub-item"],[1,"img"],[3,"routerLink","src","alt"],[1,"itemName"],[2,"font-weight","bold"],[2,"width","max-content","display","flex","justify-content","center","vertical-align","middle","align-items","center","border","none","border-radius","5px","background-color","#37B7C3","color","white","padding","2px 8px",3,"routerLink"],[2,"color","white","font-size","15px","position","relative","top","0.35rem"],[1,"count"],["name","quantity","inputId","minmax","mode","decimal",3,"ngModel","showButtons","min","max","ngModelChange"],["style"," width:max-content; display: flex; align-items: center; margin-top: 0.5rem;",4,"ngIf"],[2,"width","max-content","display","flex","align-items","center","margin-top","0.5rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","border","none","border-radius","5px","background-color","#071952","color","white","padding","3px 8px","box-shadow","6px 6px 12px #c5c5c5,\n  -6px -6px 12px #ffffff",3,"click"],[2,"color","#F0DE36"],["routerLink","/buyer/cart",2,"width","100%","display","flex","align-items","center","justify-content","center","border","none","border-radius","5px","background-color","#071952","color","white","padding","3px 8px"],[3,"disabled","click"],["loadingIndicator",""]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,x,2,2,"div",1),t.qZA(),t.YNc(2,_,3,0,"div",2),t.TgZ(3,"div",3)(4,"div",4),t.YNc(5,w,2,1,"div",5),t.qZA(),t.TgZ(6,"div",6),t.YNc(7,M,3,1,"button",7),t.qZA()()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.notifications),t.xp6(1),t.Q6J("ngIf",o.products.length<1),t.xp6(3),t.Q6J("ngForOf",o.products),t.xp6(2),t.Q6J("ngIf",o.hasMoreProducts&&!o.isLoading))},dependencies:[a.mk,a.sg,a.O5,d.rH,d.Od,g.JJ,g.On,l.Hw,p.Rn,a.H9],styles:[".hh[_ngcontent-%COMP%]{width:100%;justify-items:center;-ms-overflow-style:none;scrollbar-width:none;overflow-x:hidden;height:max-content;margin-bottom:5rem}.hh[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items-[_ngcontent-%COMP%]{width:90%;height:auto}.item[_ngcontent-%COMP%]{width:25%;display:inline-block;flex-wrap:wrap;align-items:center;margin:.5rem 1rem;border-radius:8px;background:none;box-shadow:#0000001a 0 4px 12px}p-toast[_ngcontent-%COMP%]{width:20%}.img[_ngcontent-%COMP%]{margin-top:.5rem}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:10rem;height:7rem;margin-right:1rem;border-radius:8px;object-fit:cover}.sub-item[_ngcontent-%COMP%]{width:93%;flex:1 1 93%;display:flex;align-items:normal;vertical-align:middle;margin:.4rem .5rem;padding-left:1rem;padding-bottom:1rem;padding-top:.4rem;border-radius:8px}.itemName[_ngcontent-%COMP%]{margin-top:-.5rem}.notification[_ngcontent-%COMP%]{padding:15px;margin:10px;border-radius:5px;font-size:16px;color:#fff;opacity:.9;transition:opacity .5s ease-out}.success[_ngcontent-%COMP%]{background-color:#4caf50}.error[_ngcontent-%COMP%]{background-color:#f44336}.info[_ngcontent-%COMP%]{background-color:#2196f3}.count[_ngcontent-%COMP%]{width:85%}.itm-btn[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center;text-align:center;margin:0;position:relative;left:-5.8%;margin-bottom:2.4rem;margin-top:.8rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content;background-color:#2196f3;color:#fff;font-weight:700;border:none;border-radius:7px;padding:6px 9px;margin:0;text-align:center;box-shadow:6px 6px 12px #c5c5c5,-6px -6px 12px #fff}@media screen and (max-width: 1200px){.item[_ngcontent-%COMP%]{width:50%;display:inline-block;flex-wrap:wrap;align-items:center;margin:0rem;border-radius:8px}.items-[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 700px){.item[_ngcontent-%COMP%]{width:50}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6rem;height:7rem;margin-right:2rem;border-radius:8px}.sub-item[_ngcontent-%COMP%]{padding:1rem}}@media screen and (orientation: portrait){.hh[_ngcontent-%COMP%]{height:100%;margin-bottom:0;padding-bottom:1rem}.img[_ngcontent-%COMP%]{padding-right:1rem}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:7.7rem;height:7rem;margin-right:2.4rem;border-radius:8px}.items-[_ngcontent-%COMP%]{margin-top:1rem;width:100%}.count[_ngcontent-%COMP%]{width:75%}.itm-btn[_ngcontent-%COMP%]{left:0}.item[_ngcontent-%COMP%]{width:100%;flex-wrap:nowrap;display:block}.sub-item[_ngcontent-%COMP%]{width:90%;padding-top:1rem;padding-bottom:1rem;box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px}}.sub-item[_ngcontent-%COMP%], .item[_ngcontent-%COMP%], .items-[_ngcontent-%COMP%], .hh[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none;overflow-x:hidden}.hh[_ngcontent-%COMP%]::-webkit-scrollbar, .sub-item[_ngcontent-%COMP%]::-webkit-scrollbar, .item[_ngcontent-%COMP%]::-webkit-scrollbar, .items-[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})}return n})()}];let O=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(P),d.Bz]})}return n})();var I=r(6451),k=r(707);let Z=(()=>{class n{static#t=this.\u0275fac=function(e){return new(e||n)};static#i=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[a.ez,O,g.u5,l.Ps,I.EV,k.hJ,p.L$]})}return n})()}}]);
"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[1083],{1083:(q,x,l)=>{l.r(x),l.d(x,{AdminModule:()=>Y});var c=l(6814),f=l(3403),t=l(5879),_=l(2048),d=l(6223);function k(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"span",19),t.NdJ("click",function(){const u=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.selectModel(u))}),t._uU(1),t.qZA()}if(2&o){const e=h.$implicit,n=t.oxw();t.ekj("selected",e===n.selectedModel),t.xp6(1),t.hij(" ",e," ")}}function i(o,h){if(1&o&&(t.TgZ(0,"li")(1,"strong"),t._uU(2),t.qZA(),t._uU(3),t.qZA()),2&o){const e=h.$implicit;t.xp6(2),t.hij("",e[0],":"),t.xp6(1),t.hij(" ",e[1]," ")}}function a(o,h){if(1&o&&(t.TgZ(0,"div",25)(1,"ul"),t.YNc(2,i,4,2,"li",21),t.qZA()()),2&o){const e=h.$implicit,n=t.oxw(3);t.xp6(2),t.Q6J("ngForOf",n.objectEntries(e))}}function s(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h4"),t._uU(2),t.qZA(),t.YNc(3,a,3,1,"div",24),t.qZA()),2&o){const e=h.$implicit;t.xp6(2),t.hij("Model: ",e.key,""),t.xp6(1),t.Q6J("ngForOf",e.value)}}function p(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"div",20)(1,"h3"),t._uU(2),t.qZA(),t.YNc(3,s,4,2,"div",21),t.ALo(4,"keyvalue"),t.TgZ(5,"div",22)(6,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.previousPage())}),t._uU(7,"Previous"),t.qZA(),t.TgZ(8,"button",23),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.nextPage())}),t._uU(9,"Next"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.hij("Total Results: ",e.totalResults,""),t.xp6(1),t.Q6J("ngForOf",t.lcZ(4,4,e.groupedResults)),t.xp6(3),t.Q6J("disabled",!e.canGoPrevious()),t.xp6(2),t.Q6J("disabled",!e.canGoNext())}}function g(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Order Received"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.order.totalOrders)}}function v(o,h){if(1&o&&(t.TgZ(0,"div",27)(1,"div")(2,"h2"),t._uU(3,"Order Delivered"),t.qZA(),t.TgZ(4,"div",26)(5,"h1"),t._uU(6),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(6),t.Oqu(e.order.deliveredOrders)}}function y(o,h){if(1&o&&(t.TgZ(0,"div",28)(1,"div")(2,"h2"),t._uU(3,"Total Sales.."),t.qZA(),t.TgZ(4,"div",26)(5,"h1"),t._uU(6),t.qZA()()()()),2&o){const e=t.oxw();t.xp6(6),t.Oqu(e.order.deliveredOrders)}}function Z(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Total Items"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.products.count)}}function $(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Total Users"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.users.totalUsers)}}function S(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Total Admins"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.users.admins)}}function E(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Total Buyers"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.users.buyers)}}function N(o,h){if(1&o&&(t.TgZ(0,"div")(1,"h2"),t._uU(2,"Total Suppliers"),t.qZA(),t.TgZ(3,"div",26)(4,"h1"),t._uU(5),t.qZA()()()),2&o){const e=t.oxw();t.xp6(5),t.Oqu(e.users.suppliers)}}let I=(()=>{class o{constructor(e){this.adminService=e,this.model="All",this.query="",this.results=[],this.totalResults=0,this.start=0,this.limit=10,this.models=["All","Product","User","Order","Category","ProductSubmission","Requirement"],this.selectedModel="All",this.groupedResults={},this.sPerformed=!1}ngOnInit(){this.token=localStorage.getItem("token"),this.getOrdersCount(),this.getProductsCount(),this.getUsersCount()}onSearch(){this.sPerformed=!0;const e="All"===this.selectedModel?"":this.selectedModel;console.log("Selected Model:",e),console.log("Query:",this.query),this.adminService.search(this.query,e,this.start,this.limit,this.token).subscribe(n=>{console.log("search res",n),this.results=n.results,this.totalResults=n.totalResults,this.groupResultsByModel()},n=>{console.error("Search error:",n)})}objectEntries(e){return Object.entries(e)}groupResultsByModel(){this.groupedResults=this.results.reduce((e,n)=>{const r=n.model;return e[r]||(e[r]=[]),e[r].push(n),e},{})}selectModel(e){this.selectedModel=e,this.start=0,this.onSearch()}clearModel(){this.selectedModel="All",this.start=0,this.onSearch()}nextPage(){this.start+this.limit<this.totalResults&&(this.start+=this.limit,this.onSearch())}previousPage(){this.start>0&&(this.start-=this.limit,this.onSearch())}resetSearch(){this.query="",this.results=[],this.groupedResults={},this.totalResults=0,this.start=0,this.sPerformed=!1}canGoNext(){return this.start+this.limit<this.totalResults}canGoPrevious(){return this.start>0}getOrdersCount(){this.adminService.getOrdersCountAdmin(this.token).subscribe(e=>{console.log(e),this.order=e})}getProductsCount(){this.adminService.getProductsCountAdmin(this.token).subscribe(e=>{console.log(e),this.products=e})}getUsersCount(){this.adminService.getUsersCountAdmin(this.token).subscribe(e=>{console.log(e),this.users=e})}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.l))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-dashboard"]],decls:31,vars:13,consts:[[1,"search-all"],[1,"search-container"],[1,"search-sub"],["type","text","placeholder","Enter search query",3,"ngModel","ngModelChange","keyup.enter"],[1,"button-group"],[1,"srch",3,"click"],[1,"rst",3,"click"],[1,"model-tags"],["class","tag",3,"selected","click",4,"ngFor","ngForOf"],[1,"tag","clear",3,"click"],["class","results-container",4,"ngIf"],[1,"dash-main"],[1,"s-dashboard"],["routerLink","/supplier/orders-recieved/pending",1,"s-d-i","s-r"],[4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-d",4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-s",4,"ngIf"],["routerLink","/buyer/marketplace",1,"s-d-i","s-i"],["routerLink","/admin/allusers",1,"s-d-i","s-i"],[1,"tag",3,"click"],[1,"results-container"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],[1,"stat-value"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-d"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-s"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),t.NdJ("ngModelChange",function(m){return r.query=m})("keyup.enter",function(){return r.onSearch()}),t.qZA(),t._UZ(4,"br"),t.TgZ(5,"div",4)(6,"button",5),t.NdJ("click",function(){return r.onSearch()}),t._uU(7,"Search"),t.qZA(),t.TgZ(8,"button",6),t.NdJ("click",function(){return r.resetSearch()}),t._uU(9,"Reset Search"),t.qZA()()(),t.TgZ(10,"div",7),t.YNc(11,k,2,3,"span",8),t.TgZ(12,"span",9),t.NdJ("click",function(){return r.clearModel()}),t._uU(13," All "),t.qZA()()(),t.YNc(14,p,10,6,"div",10),t.qZA(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",13),t.YNc(18,g,6,1,"div",14),t.qZA(),t.YNc(19,v,7,1,"div",15),t.YNc(20,y,7,1,"div",16),t.TgZ(21,"div",17),t.YNc(22,Z,6,1,"div",14),t.qZA(),t.TgZ(23,"div",18),t.YNc(24,$,6,1,"div",14),t.qZA(),t.TgZ(25,"div",18),t.YNc(26,S,6,1,"div",14),t.qZA(),t.TgZ(27,"div",18),t.YNc(28,E,6,1,"div",14),t.qZA(),t.TgZ(29,"div",18),t.YNc(30,N,6,1,"div",14),t.qZA()()()),2&n&&(t.xp6(3),t.Q6J("ngModel",r.query),t.xp6(8),t.Q6J("ngForOf",r.models),t.xp6(1),t.ekj("selected","All"===r.selectedModel),t.xp6(2),t.Q6J("ngIf",r.sPerformed),t.xp6(4),t.Q6J("ngIf",r.order),t.xp6(1),t.Q6J("ngIf",r.order),t.xp6(1),t.Q6J("ngIf",r.order),t.xp6(2),t.Q6J("ngIf",r.products),t.xp6(2),t.Q6J("ngIf",r.users),t.xp6(2),t.Q6J("ngIf",r.users),t.xp6(2),t.Q6J("ngIf",r.users),t.xp6(2),t.Q6J("ngIf",r.users))},dependencies:[c.sg,c.O5,f.rH,d.Fj,d.JJ,d.On,c.Nd],styles:['@charset "UTF-8";.search-all[_ngcontent-%COMP%]{width:80%;margin-top:20px;overflow-x:hidden}.search-container[_ngcontent-%COMP%]{display:block;gap:10px;overflow-x:hidden}.search-sub[_ngcontent-%COMP%]{display:flex;margin-bottom:.5rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:8px 5px}.search-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content}.results-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:hidden}.srch[_ngcontent-%COMP%]{background-color:#000}.rst[_ngcontent-%COMP%]{background-color:#00f}.srch[_ngcontent-%COMP%], .rst[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:8px;padding:5px 9px;margin-left:.2rem}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.model-tags[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.tag[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f0f0f0;border-radius:5px;cursor:pointer;transition:background-color .3s;width:max-content}.tag.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.tag.clear[_ngcontent-%COMP%]{background-color:#ddd}.tag[_ngcontent-%COMP%]:hover{background-color:#cce5ff}.result-item[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;margin:10px 0;border-radius:5px;overflow-x:hidden}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.dash-main[_ngcontent-%COMP%], .s-dashboard[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.dash-main[_ngcontent-%COMP%]{overflow-x:hidden}.s-dashboard[_ngcontent-%COMP%]{width:max-content;display:flex;flex-wrap:wrap;gap:30px;justify-content:space-around;padding:15px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;flex:1 1 calc(25% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease}.s-d-i[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.s-d-i[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.stat-value[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;margin:0;color:#00796b}.s-dashboard[_ngcontent-%COMP%]{width:100%;display:inline-block}.s-d-i[_ngcontent-%COMP%]{width:25%;display:inline-block;margin:15px}@media screen and (orientation: portrait){.search-all[_ngcontent-%COMP%]{width:98%;overflow-x:hidden}.model-tags[_ngcontent-%COMP%]{display:inline-block}.tag[_ngcontent-%COMP%]{display:inline-block;margin:5px}.search-sub[_ngcontent-%COMP%]{display:grid;margin-bottom:.2rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%;padding:8px 5px;margin-bottom:.5rem}.result-item[_ngcontent-%COMP%]{overflow-x:scroll}.s-dashboard[_ngcontent-%COMP%]{height:max-content;margin-bottom:10rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 5px;width:8.8rem;max-width:8.8rem;min-width:auto;height:12rem;margin-bottom:5rem}}@media screen and (max-width: 500px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;overflow-x:hidden}}@media screen and (orientation: portrait){.results-container[_ngcontent-%COMP%]{margin:0}.dash-main[_ngcontent-%COMP%]{width:95%;display:flex;justify-content:center;overflow-x:hidden;padding-left:1rem;max-width:95%}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:8.5rem;overflow-x:hidden}}@media screen and (max-width: 520px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px}}@media screen and (max-width: 420px){.dash-main[_ngcontent-%COMP%]{padding-left:.5rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;width:8rem;max-width:8rem}}@media screen and (max-width: 390px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.4rem;max-width:1.4rem;font-size:small}}*[_ngcontent-%COMP%]{box-sizing:border-box}']})}return o})(),T=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-admin"]],decls:1,vars:0,template:function(n,r){1&n&&t._UZ(0,"app-dashboard")},dependencies:[I]})}return o})(),A=(()=>{class o{constructor(e,n,r,u){this.fb=e,this.userService=n,this.route=r,this.router=u,this.isEditMode=!1}ngOnInit(){this.userForm=this.fb.group({name:["",d.kI.required],email:["",[d.kI.required,d.kI.email]],password:[""],phone:["",d.kI.required],street:[""],apartment:[""],city:["",d.kI.required],zip:[""],country:["",d.kI.required],isAdmin:[!1],isSupplier:[!1],isBuyer:[!0]}),this.token=localStorage.getItem("token"),this.customIdentifer=this.route.snapshot.params.customIdentifer,this.customIdentifer&&(this.isEditMode=!0,this.userService.getUserByCID(this.customIdentifer,this.token).subscribe(e=>{console.log(e),this.userForm.patchValue(e)},e=>console.error("Error fetching user details",e))),this.customIdentifer&&this.isEditMode&&(this.userForm.value.password="")}onSubmit(){if(this.userForm.invalid)return void console.log("iclicked-inavlid-form",this.userForm.value);console.log("iclicked-valid-form",this.userForm.value);const e=this.userForm.value;this.isEditMode?this.userService.updateUser(this.customIdentifer,e,this.token).subscribe(n=>{console.log("User updated successfully",n),this.router.navigate(["/admin/allusers"])},n=>console.error("Error updating user",n)):this.userService.addUser(e,this.token).subscribe(n=>{console.log("User added successfully",n),this.router.navigate(["/admin/allusers"])},n=>console.error("Error adding user",n))}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(d.qu),t.Y36(_.l),t.Y36(f.gz),t.Y36(f.F0))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-aeuser"]],decls:56,vars:4,consts:[[1,"form"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text","placeholder","Enter name"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Enter email"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Enter password"],["for","phone"],["id","phone","formControlName","phone","type","text","placeholder","Enter phone number"],["for","street"],["id","street","formControlName","street","type","text","placeholder","Enter street"],["for","apartment"],["id","apartment","formControlName","apartment","type","text","placeholder","Enter apartment"],["for","city"],["id","city","formControlName","city","type","text","placeholder","Enter city"],["for","zip"],["id","zip","formControlName","zip","type","text","placeholder","Enter ZIP code"],["for","country"],["id","country","formControlName","country","type","text","placeholder","Enter country"],[1,"form-check-group",2,"position","relative","vertical-align","middle"],["for","isAdmin"],[2,"position","relative"],["id","isAdmin","formControlName","isAdmin","type","checkbox"],["for","isSupplier"],["id","isSupplier","formControlName","isSupplier","type","checkbox"],["for","isBuyer"],["id","isBuyer","formControlName","isBuyer","type","checkbox"],["type","submit",1,"submit-btn",3,"disabled"]],template:function(n,r){1&n&&(t.TgZ(0,"div")(1,"div",0)(2,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(3,"h2"),t._uU(4),t.qZA(),t.TgZ(5,"div",2)(6,"label",3),t._uU(7,"Name"),t.qZA(),t._UZ(8,"input",4),t.qZA(),t.TgZ(9,"div",2)(10,"label",5),t._uU(11,"Email"),t.qZA(),t._UZ(12,"input",6),t.qZA(),t.TgZ(13,"div",2)(14,"label",7),t._uU(15,"Password"),t.qZA(),t._UZ(16,"input",8),t.qZA(),t.TgZ(17,"div",2)(18,"label",9),t._uU(19,"Phone"),t.qZA(),t._UZ(20,"input",10),t.qZA(),t.TgZ(21,"div",2)(22,"label",11),t._uU(23,"Street"),t.qZA(),t._UZ(24,"input",12),t.qZA(),t.TgZ(25,"div",2)(26,"label",13),t._uU(27,"Apartment"),t.qZA(),t._UZ(28,"input",14),t.qZA(),t.TgZ(29,"div",2)(30,"label",15),t._uU(31,"City"),t.qZA(),t._UZ(32,"input",16),t.qZA(),t.TgZ(33,"div",2)(34,"label",17),t._uU(35,"ZIP"),t.qZA(),t._UZ(36,"input",18),t.qZA(),t.TgZ(37,"div",2)(38,"label",19),t._uU(39,"Country"),t.qZA(),t._UZ(40,"input",20),t.qZA(),t.TgZ(41,"div",21)(42,"label",22)(43,"span",23),t._uU(44,"Admin"),t.qZA(),t._UZ(45,"input",24),t.qZA(),t.TgZ(46,"label",25)(47,"span",23),t._uU(48,"Supplier"),t.qZA(),t._UZ(49,"input",26),t.qZA(),t.TgZ(50,"label",27)(51,"span",23),t._uU(52,"Buyer"),t.qZA(),t._UZ(53,"input",28),t.qZA()(),t.TgZ(54,"button",29),t._uU(55),t.qZA()()()()),2&n&&(t.xp6(2),t.Q6J("formGroup",r.userForm),t.xp6(2),t.hij("",r.isEditMode?"Update":"Add"," User"),t.xp6(50),t.Q6J("disabled",r.userForm.invalid),t.xp6(1),t.hij("",r.isEditMode?"Update":"Add"," User"))},dependencies:[d._Y,d.Fj,d.Wl,d.JJ,d.JL,d.sg,d.u],styles:[".form[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center;margin-left:-8rem;margin-top:1rem;height:100%;overflow-x:hidden;margin-bottom:5rem}.user-form[_ngcontent-%COMP%]{width:40%;margin:0;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9;height:100%;overflow:hidden}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.form-check-group[_ngcontent-%COMP%]{margin:20px;color:#000}.form-check-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;font-weight:400;justify-content:space-around;width:50%;color:#000}.submit-btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){.form[_ngcontent-%COMP%]{height:100%;margin-left:0rem;margin-bottom:10rem}.user-form[_ngcontent-%COMP%]{padding:10px;width:90%;height:100%}.submit-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.form-check-group[_ngcontent-%COMP%]{position:relative;left:20%;width:75%;font-size:small}}"]})}return o})();var M=l(1391),O=l(9742),b=l(7700),C=l(9157),P=l(2032);function F(o,h){1&o&&(t.TgZ(0,"mat-error"),t._uU(1," Item Type is required. "),t.qZA())}let U=(()=>{class o{constructor(e,n,r,u){this.userService=e,this.fb=n,this.dialogRef=r,this.data=u,this.isEditing=!1,this.imageDisplay=[],this.image=[],this.categoryForm=this.fb.group({itemType:[u.itemType||"",d.kI.required],itemName:[""],image:[u.image||""]}),this.token=localStorage.getItem("token")}ngOnInit(){this.isEditing=!!this.data.id,this.isEditing&&(this.categoryForm.patchValue({itemType:this.data.itemType,itemName:this.data.itemName,image:this.data.image}),this.data.image&&(this.imageDisplay=[this.data.image]))}onFileChange(e){e.target.files&&e.target.files.length&&(this.image=Array.from(e.target.files),this.imageDisplay=[],this.image.forEach(n=>{const r=new FileReader;r.onload=u=>{this.imageDisplay.push(u.target.result)},r.readAsDataURL(n)}),this.categoryForm.patchValue({image:this.image}))}onSubmit(){const e=new FormData;Object.keys(this.categoryForm.controls).forEach(n=>{"image"!==n&&e.append(n,this.categoryForm.get(n)?.value)}),this.image.forEach(n=>{e.append("image",n,n.name)}),this.categoryForm.valid&&(this.isEditing?(this.updateCategory(e),console.log(e)):this.createCategory(e))}updateCategory(e){this.token&&this.data.id&&this.userService.updateCategory(this.data.id,e,this.token).subscribe(n=>this.dialogRef.close(!0),n=>console.error("Error updating category",n))}createCategory(e){this.token&&this.userService.postCategory(e,this.token).subscribe(()=>this.dialogRef.close(!0),n=>console.error("Error creating category",n))}onCancel(){this.dialogRef.close()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.l),t.Y36(d.qu),t.Y36(b.so),t.Y36(b.WI))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-pecategories"]],decls:18,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","itemType"],[4,"ngIf"],[1,"form-group"],["for","files"],["alt","",1,"img-preview",2,"width","4rem","height","4rem",3,"src"],["id","images","type","file","multiple","",1,"form-control-file",3,"change"],["mat-dialog-actions","",1,"button"],["mat-button","",1,"b1",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"b2"]],template:function(n,r){1&n&&(t.TgZ(0,"h2",0),t._uU(1),t.qZA(),t.TgZ(2,"form",1),t.NdJ("ngSubmit",function(){return r.onSubmit()}),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5,"Item Type"),t.qZA(),t._UZ(6,"input",3),t.YNc(7,F,2,0,"mat-error",4),t.qZA(),t.TgZ(8,"div",5)(9,"label",6),t._uU(10,"Images:"),t.qZA(),t._UZ(11,"img",7),t.TgZ(12,"input",8),t.NdJ("change",function(m){return r.onFileChange(m)}),t.qZA()(),t.TgZ(13,"div",9)(14,"button",10),t.NdJ("click",function(){return r.onCancel()}),t._uU(15,"Cancel"),t.qZA(),t.TgZ(16,"button",11),t._uU(17),t.qZA()()()),2&n&&(t.xp6(1),t.Oqu(r.isEditing?"Edit Category":"Add Category"),t.xp6(1),t.Q6J("formGroup",r.categoryForm),t.xp6(5),t.Q6J("ngIf",r.categoryForm.get("itemType").hasError("required")),t.xp6(4),t.s9C("src",r.imageDisplay[0],t.LSH),t.xp6(6),t.hij(" ",r.isEditing?"Save Changes":"Add Category"," "))},dependencies:[c.O5,d._Y,d.Fj,d.JJ,d.JL,d.sg,d.u,b.uh,b.H8,C.KE,C.hX,C.TO,P.Nt],styles:[".button[_ngcontent-%COMP%]   .b2[_ngcontent-%COMP%]{color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px}.button[_ngcontent-%COMP%]   .b1[_ngcontent-%COMP%]{color:red;background-color:#fff;padding:8px 16px;border:none;border-radius:8px}"]})}return o})();var w=l(617);function D(o,h){if(1&o){const e=t.EpF();t.TgZ(0,"div",5)(1,"div",6),t._UZ(2,"img",7),t.TgZ(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span")(6,"mat-icon",8),t.NdJ("click",function(){const u=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.openDialog(u))}),t._uU(7,"edit_note"),t.qZA()(),t.TgZ(8,"span")(9,"mat-icon",9),t.NdJ("click",function(){const u=t.CHM(e).$implicit,m=t.oxw();return t.KtG(m.deleteCategory(u._id))}),t._uU(10,"delete"),t.qZA()()()()}if(2&o){const e=h.$implicit;t.xp6(2),t.s9C("src",e.image[0],t.LSH),t.xp6(2),t.Oqu(e.itemType)}}const z=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"dashboard",component:T},{path:"home",component:T},{path:"adduser",component:A},{path:"secret/signupAz",component:A},{path:"aeuser/:customIdentifer",component:A},{path:"",loadChildren:()=>l.e(2958).then(l.bind(l,2958)).then(o=>o.OrdersModule),canActivate:[M.a,O.p],data:{role:"admin"}},{path:"",loadChildren:()=>l.e(390).then(l.bind(l,390)).then(o=>o.UsersModule),canActivate:[M.a,O.p],data:{role:"admin"}},{path:"",loadChildren:()=>l.e(1260).then(l.bind(l,1260)).then(o=>o.ReqAdminModule),canActivate:[M.a,O.p],data:{role:"admin"}},{path:"categories",component:(()=>{class o{constructor(e,n){this.userService=e,this.dialog=n,this.categories=[],this.token=localStorage.getItem("token")}ngOnInit(){this.getCategories()}getCategories(){this.token&&this.userService.getCategories(this.token).subscribe(e=>{this.categories=e,console.log(this.categories)},e=>console.error("Error fetching categories",e))}openDialog(e){this.dialog.open(U,{width:"400px",data:e?{itemType:e.itemType,itemName:e.itemName,image:e.image,id:e._id}:{}}).afterClosed().subscribe(r=>{r&&this.getCategories()})}deleteCategory(e){this.token&&confirm("Are you sure you want to delete this category?")&&this.userService.deleteCategory({id:e}).subscribe(()=>{alert("Category deleted successfully"),this.getCategories()},n=>console.error("Error deleting category",n))}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(_.l),t.Y36(b.uw))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-getcategories"]],decls:10,vars:1,consts:[[1,"container"],[1,"button"],["mat-raised-button","","color","primary",3,"click"],[1,"cat"],["class","cat-sub",4,"ngFor","ngForOf"],[1,"cat-sub"],[1,"cat-sub2"],["alt","",2,"width","20px","height","20px","border-radius","100%",3,"src"],[2,"font-size","28px",3,"click"],[2,"color","#D71313",3,"click"]],template:function(n,r){1&n&&(t.TgZ(0,"div",0)(1,"h2"),t._uU(2,"Categories"),t.qZA(),t.TgZ(3,"div",1)(4,"button",2),t.NdJ("click",function(){return r.openDialog()}),t.TgZ(5,"mat-icon"),t._uU(6,"add"),t.qZA(),t._uU(7," Add Category"),t.qZA()(),t.TgZ(8,"div",3),t.YNc(9,D,11,2,"div",4),t.qZA()()),2&n&&(t.xp6(9),t.Q6J("ngForOf",r.categories))},dependencies:[c.sg,w.Hw],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100% s}.cat[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;width:100%}.cat-sub[_ngcontent-%COMP%]{display:flex;width:auto;padding-right:1rem;text-align:center}.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:auto;gap:5px;padding:8px 15px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}.cat-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.button[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:max-content;box-shadow:#0000002e 0 2px 4px;color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px;display:flex;align-items:center}@media screen and (orientation: portrait){.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:60%;padding:8px 5px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}}"]})}return o})()},{path:"add-category",component:U},{path:"get-category",component:U}];let B=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(z),f.Bz]})}return o})();var R=l(4240);let Y=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({providers:[R.f],imports:[c.ez,B,d.u5,d.UX,w.Ps,b.Is,C.lN,P.c]})}return o})()},2048:(q,x,l)=>{l.d(x,{l:()=>_});var c=l(9862),f=l(5349),t=l(5879);let _=(()=>{class d{constructor(i){this.http=i,this.baseUrl=f.N.baseUrl}search(i,a,s=0,p=10,g){const v=new c.WM({Authorization:`Bearer ${g}`}),y=(new c.LE).set("query",i).set("model",a).set("start",s.toString()).set("limit",p.toString());return this.http.get(`${this.baseUrl}/admin/search`,{headers:v,params:y})}getRequestedSubmissions(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/requested-submissions`,s)}getCompletedProductsForAdmin(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/admin-completed-products`,s)}confirmDelivery(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/confirm-delivery`,{submissionId:i},p)}updateDelivery(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.post(`${this.baseUrl}/request/delivery-update`,{requirementId:i,submissionId:a},g)}getAllRequirements(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/all-requirements`,s)}forwardRequirement(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/forward-requirement`,{requirementId:i},p)}getProductSubmissions(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/all-product-submissions`,s)}forwardProductSubmission(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.post(`${this.baseUrl}/request/forward-product-submission`,{submissionId:i,requirementId:a},g)}getOrdersCountAdmin(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/orderscount`,s)}getProductsCountAdmin(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/productscount`,s)}getUsersCountAdmin(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/users-count`,s)}getProductsAll(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.get(`${this.baseUrl}/admin/allitems?start=${i}&limit=${a}`,g)}getOrdersAll(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.get(`${this.baseUrl}/admin/orders?start=${i}&limit=${a}`,g)}getOrder(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/order/:customIdentifier`,s)}getUsers(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/users/all`,s)}getUserByCID(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/user/${i}`,p)}addUser(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/user/signup`,i,p)}updateUser(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.put(`${this.baseUrl}/updateuser/${i}`,a,g)}getCategories(i){const s={headers:new c.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/categories`,s)}getCategory(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/${i}`,p)}postCategory(i,a){const p={headers:new c.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/category`,i,p)}updateCategory(i,a,s){const g={headers:new c.WM({Authorization:`Bearer ${s}`})};return this.http.put(`${this.baseUrl}/category/${i}`,a,g)}deleteCategory(i){return this.http.post(`${this.baseUrl}/category/delete-category`,i)}getCategoryById(i){return this.http.get(`${this.baseUrl}/category/${i}`)}static#t=this.\u0275fac=function(a){return new(a||d)(t.LFG(c.eN))};static#e=this.\u0275prov=t.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"})}return d})()}}]);
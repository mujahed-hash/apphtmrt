"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[8208],{8208:(U,a,c)=>{c.r(a),c.d(a,{ReqSupModule:()=>M});var u=c(6814),p=c(3403),e=c(5879),l=c(6940);function m(n,r){1&n&&(e.TgZ(0,"div",3),e._uU(1," No Pending Requirements "),e.qZA())}const g=function(n){return["/supplier/sup-requested/",n]};function _(n,r){if(1&n&&(e.TgZ(0,"button",8),e._uU(1,"View"),e.qZA()),2&n){const t=e.oxw().$implicit;e.Q6J("routerLink",e.VKq(1,g,t.customIdentifier))}}function h(n,r){if(1&n&&(e.TgZ(0,"div",4)(1,"div",5)(2,"p"),e._uU(3),e.qZA()(),e.TgZ(4,"div",6),e.YNc(5,_,2,3,"button",7),e.qZA()()),2&n){const t=r.$implicit,i=e.oxw();e.xp6(3),e.hij("",i.truncateText(t.reqDetails,15),".."),e.xp6(2),e.Q6J("ngIf",t.reqDetails.length>1)}}let f=(()=>{class n{constructor(t){this.requirementService=t}ngOnInit(){this.token=localStorage.getItem("token"),this.loadForwardedRequirements()}loadForwardedRequirements(){this.requirementService.getForwardedRequirementsToSupplier(this.token).subscribe(t=>{this.requirements=t,console.log(t)})}truncateText(t,i){return t.length>i?t.substring(0,i)+"...":t}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(l.b))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-req-sup"]],decls:3,vars:2,consts:[[1,"requests"],["style","background-color: white; padding: 4px 8px; border: #c8c9d4 1.5px solid; color:#0D1282; width:max-content; border-radius: 9px; position: relative; margin-top: 1rem;",4,"ngIf"],["class","request",4,"ngFor","ngForOf"],[2,"background-color","white","padding","4px 8px","border","#c8c9d4 1.5px solid","color","#0D1282","width","max-content","border-radius","9px","position","relative","margin-top","1rem"],[1,"request"],[1,"r-s-t"],[1,"r-s-btn"],["class","v-b",3,"routerLink",4,"ngIf"],[1,"v-b",3,"routerLink"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0),e.YNc(1,m,2,0,"div",1),e.YNc(2,h,6,2,"div",2),e.qZA()),2&i&&(e.xp6(1),e.Q6J("ngIf",o.requirements.length<1),e.xp6(1),e.Q6J("ngForOf",o.requirements))},dependencies:[u.sg,u.O5,p.rH],styles:[".requests[_ngcontent-%COMP%]{width:100%;display:flex;gap:2px}.request[_ngcontent-%COMP%]{width:15%;display:inline-block;margin:1rem;border:1px solid #161D6F;border-radius:20px}.requests[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;left:1rem}.r-s-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.request[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;padding:8px 0;width:90%;border:none;margin-bottom:.4rem}.f-d[_ngcontent-%COMP%]{background-color:#bde8ca;color:#0d7c66;font-weight:700}.f-s[_ngcontent-%COMP%]{background-color:#e9efec;color:#16325b;font-weight:700}.f-s[_ngcontent-%COMP%]:hover{background-color:#16325b;color:#e9efec;font-weight:700}"]})}return n})();var s=c(6223);function q(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h4"),e._uU(2,"Image Preview:"),e.qZA(),e._UZ(3,"img",9),e.qZA()),2&n){const t=e.oxw(3);e.xp6(3),e.Q6J("src",t.imagePreview,e.LSH)}}function x(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div")(1,"h3"),e._uU(2,"Post Product Information"),e.qZA(),e.TgZ(3,"form",1),e.NdJ("ngSubmit",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.postProductInfo())}),e.TgZ(4,"label",2),e._uU(5,"Product Name:"),e.qZA(),e.TgZ(6,"input",3),e.NdJ("ngModelChange",function(o){e.CHM(t);const d=e.oxw(2);return e.KtG(d.name=o)}),e.qZA(),e.TgZ(7,"label",4),e._uU(8,"Price:"),e.qZA(),e.TgZ(9,"input",5),e.NdJ("ngModelChange",function(o){e.CHM(t);const d=e.oxw(2);return e.KtG(d.price=o)}),e.qZA(),e.YNc(10,q,4,1,"div",0),e.TgZ(11,"label",6),e._uU(12,"Product Image:"),e.qZA(),e.TgZ(13,"input",7),e.NdJ("change",function(o){e.CHM(t);const d=e.oxw(2);return e.KtG(d.onFileChange(o))}),e.qZA(),e.TgZ(14,"button",8),e._uU(15,"Submit Product Info"),e.qZA()()()}if(2&n){const t=e.oxw(2);e.xp6(6),e.Q6J("ngModel",t.name),e.xp6(3),e.Q6J("ngModel",t.price),e.xp6(1),e.Q6J("ngIf",t.imagePreview)}}function v(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h3"),e._uU(2,"Posted Product Information"),e.qZA(),e.TgZ(3,"p")(4,"strong"),e._uU(5,"Name:"),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"p")(8,"strong"),e._uU(9,"Price:"),e.qZA(),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.qZA(),e._UZ(13,"img",10),e.qZA()),2&n){const t=e.oxw(2);e.xp6(6),e.hij(" ",t.SubmittedProd.name,""),e.xp6(4),e.hij(" ",t.SubmittedProd.price,""),e.xp6(2),e.hij("Status: ",t.SubmittedProd.status,""),e.xp6(1),e.Q6J("src",t.SubmittedProd.image,e.LSH)}}function Z(n,r){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Requirement Details"),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.YNc(5,x,16,3,"div",0),e.YNc(6,v,14,4,"div",0),e.qZA()),2&n){const t=e.oxw();e.xp6(4),e.hij("Details: ",t.requirement.reqDetails,""),e.xp6(1),e.Q6J("ngIf",1!=t.requirement.hasPosted),e.xp6(1),e.Q6J("ngIf",t.requirement.hasPosted)}}function C(n,r){1&n&&(e.TgZ(0,"div",5),e._uU(1,"Loading completed products..."),e.qZA())}function S(n,r){if(1&n&&(e.TgZ(0,"div",6),e._uU(1),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Oqu(t.error)}}function b(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1," status: "),e.TgZ(2,"strong"),e._uU(3,"Delivery Requested "),e.qZA()())}function T(n,r){1&n&&(e.TgZ(0,"p"),e._uU(1," status: "),e.TgZ(2,"strong"),e._uU(3,"Delivered "),e.qZA()())}function w(n,r){if(1&n&&(e.TgZ(0,"li",8)(1,"h3"),e._uU(2),e.ALo(3,"currency"),e.qZA(),e.TgZ(4,"p")(5,"strong"),e._uU(6,"Requirement:"),e.qZA(),e._uU(7),e.qZA(),e.YNc(8,b,4,0,"p",4),e.YNc(9,T,4,0,"p",4),e._UZ(10,"img",9),e.qZA()),2&n){const t=r.$implicit;e.xp6(2),e.AsE("",t.name," - ",e.xi3(3,7,t.price,"INR"),""),e.xp6(5),e.hij(" ",t.requirement.reqDetails,""),e.xp6(1),e.Q6J("ngIf","Completed"===t.status),e.xp6(1),e.Q6J("ngIf","Delivered"===t.status),e.xp6(1),e.s9C("alt",t.name),e.Q6J("src",t.image,e.LSH)}}function I(n,r){if(1&n&&(e.TgZ(0,"ul"),e.YNc(1,w,11,10,"li",7),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.completedProducts)}}const A=[{path:"sup-requirements",component:f},{path:"sup-requested/:customIdentifier",component:(()=>{class n{constructor(t,i){this.route=t,this.requirementService=i,this.name="",this.price=0,this.selectedFile=null,this.hasPosted=!1,this.imagePreview=null}ngOnInit(){this.token=localStorage.getItem("token"),this.customIdentifier=this.route.snapshot.params.customIdentifier,console.log(this.customIdentifier),this.customIdentifier&&this.requirementService.getRequirementByCustomIdentifier(this.customIdentifier,this.token).subscribe(t=>{this.requirement=t,console.log(t),this.SubmittedProd=t.productSubmission})}onFileChange(t){if(this.selectedFile=t.target.files[0],this.selectedFile){const i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(this.selectedFile)}}postProductInfo(){this.selectedFile?this.requirementService.postProductInfo(this.requirement._id,this.name,this.price,this.selectedFile,this.token).subscribe(t=>{console.log(t.message),this.hasPosted=!0}):console.log("No file selected.")}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(p.gz),e.Y36(l.b))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-post-sup-req"]],decls:1,vars:1,consts:[[4,"ngIf"],[3,"ngSubmit"],["for","name"],["id","name","name","name","required","",3,"ngModel","ngModelChange"],["for","price"],["id","price","type","number","name","price","required","",3,"ngModel","ngModelChange"],["for","image"],["id","image","type","file","required","",3,"change"],["type","submit"],["alt","Image Preview",2,"width","200px",3,"src"],["alt","Product Image",2,"width","200px",3,"src"]],template:function(i,o){1&i&&e.YNc(0,Z,7,3,"div",0),2&i&&e.Q6J("ngIf",o.requirement)},dependencies:[u.O5,s._Y,s.Fj,s.wV,s.JJ,s.JL,s.Q7,s.On,s.F]})}return n})()},{path:"sup-deliveries",component:(()=>{class n{constructor(t){this.productService=t,this.completedProducts=[],this.loading=!0,this.error=null}ngOnInit(){this.token=localStorage.getItem("token"),this.productService.getCompletedProductsForSupplier(this.token).subscribe({next:t=>{this.completedProducts=t,this.loading=!1,console.log(t)},error:t=>{this.error=t.message||"Failed to load completed products",this.loading=!1}})}static#e=this.\u0275fac=function(i){return new(i||n)(e.Y36(l.b))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-sup-req-del"]],decls:7,vars:3,consts:[[1,"component-container"],[1,"delivery"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error"],["class","del-prod",4,"ngFor","ngForOf"],[1,"del-prod"],[1,"product-image",3,"src","alt"]],template:function(i,o){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2"),e._uU(3,"Products Deliveries"),e.qZA(),e.YNc(4,C,2,0,"div",2),e.YNc(5,S,2,1,"div",3),e.YNc(6,I,2,1,"ul",4),e.qZA()()),2&i&&(e.xp6(4),e.Q6J("ngIf",o.loading),e.xp6(1),e.Q6J("ngIf",o.error),e.xp6(1),e.Q6J("ngIf",!o.loading&&!o.error))},dependencies:[u.sg,u.O5,u.H9],styles:[".component-container[_ngcontent-%COMP%], .delivery[_ngcontent-%COMP%]{width:100%}.del-prod[_ngcontent-%COMP%]{width:20%;height:18rem;display:inline-block;box-shadow:#63636333 0 2px 8px;padding:20px;margin:0 5px 5px}.del-prod[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:5rem;width:8rem;border-radius:7px;object-fit:cover}@media screen and (orientation: portrait){.del-prod[_ngcontent-%COMP%]{width:50%;position:relative;left:-1.3rem;padding:0 7px;margin:0}}"]})}return n})()}];let R=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[p.Bz.forChild(A),p.Bz]})}return n})(),M=(()=>{class n{static#e=this.\u0275fac=function(i){return new(i||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[u.ez,R,s.u5,s.UX]})}return n})()}}]);